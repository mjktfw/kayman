#! /bin/bash

. ./app/profile
. ./app/config

type -p ssh-keygen >/dev/null ||
  ./.install-ssh

type -p gh >/dev/null ||
  ./.install-gh


# TODO: move this section to another app
LINE='\n-f "${HOME}/.profiledir" ] && . "${HOME}/.profiledir"'
FILE="${HOME}/.profile"
grep -qxF -- "$LINE" "$FILE" || echo "$LINE" >> "$FILE"
cp "${APP_DIR}/app/.profiledir" . "${HOME}/"

[ -d "${HOME}/.local/bin" ] ||
  mkdir -p "${HOME}/.local/bin"
ln -sf "${APP_DIR}/app/${APP_PREFIX}-"* "${HOME}/.local/bin/"

[ -d "${HOME}/.profile.d" ] ||
  mkdir -p "${HOME}/.profile.d"
ln -sf "${APP_DIR}/app/profile" "${HOME}/.profile.d/${APP_NAME}.sh"

[ -d "${HOME}/.config/${APP_NAME}" ] ||
  mkdir -p "${HOME}/.config/${APP_NAME}"
ln -sf "${APP_DIR}/app/config" "${HOME}/.config/${APP_NAME}/config"
