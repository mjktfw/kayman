#! /bin/bash

APP_DIR="${KMN_DIR}"
APP_DIR="${APP_DIR}" . "${APP_DIR}/app/env"

OPTSTRING=":k:"
while getopts ${OPTSTRING} opt; do
  case ${opt} in
    k)
      KEY_NAME="${OPTARG}"
      ;;
    ?)
      echo "Invalid option: -${OPTARG}."
      exit 1
      ;;
  esac
done

key_pub_path="${HOME}/.ssh/${KEY_NAME}.pub"

gh ssh-key add "${key_pub_path}" --type authentication
gh config set --host github.com git_protocol ssh
